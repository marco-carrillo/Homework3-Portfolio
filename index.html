<!--**********************************************************************-->
<!-- This program generates a ramdom pasword.                             -->
<!-- user inputs:  1) the length of the random password, and              -->
<!-- 2) the type of password required.  The options are the following     -->
<!--    2.a) special characters                                           -->
<!--    2.b) numeric characters                                           -->
<!--    2.c) lowercase characters                                         -->
<!--    2.d) uppercase characters                                         -->
<!--**********************************************************************-->

<!DOCTYPE html>
<html lang=en>

<head>
     <title>Marco Carrillo(c) Random password generator</title>
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body style="background-image: url(images/little_pluses.png);">

     
    <!--********************************************************-->
    <!--  Displaying main page.  It has 5 rows as follows       -->
    <!--  First row:  The main title of the page                -->
    <!--  Second row:  User inputs: 1) length, 2) type          -->
    <!--  Third row:  Message only visible after "generate" click-->
    <!--  Fourth row:  The random password generated             -->
    <!--  Fifth row:  The buttons showing actions               -->
    <!--*******************************************************-->
    
    <div class="container bg-white my-5">  <!--main wrapper-->

          <!--****************************-->
          <!--First row:  main page title -->
          <!--****************************-->

         <div class="row text-center my-5">  
            <div class="col-sm-12 justify-content-center">
                <h1>Password Generator</h1>
            </div>
         </div>  <!-- first row ends here-->

          <!--*********************************************-->
          <!--Second row:  User inputs:  1) length, 2) type-->
          <!--*********************************************-->

         <div class="row border mx-2 py-2 justify-content-center">  

              <div class="col-md-0 col-lg"></div>    <!--to manage margins better-->              
              
              <div class="col-lg-4 col-md-11 border rounded-lg align-self-center mx-2 my-2">   <!--asks the length of the password to generate (8 to 129-->
                  <form>
                      <div class="form-group text-center">
                           <label for="formControlRange">Length of password (8-128)</label>
                           <input type="range" class="custom-range" id="UserRequestedPwdLength" min="8" max="128" value="45">
                           <div>Current Value: <b id="result"></b></div>  <!--Provides result-->
                        </div>
                    </form>
                </div>

                <div class="col-md-0 col-lg"></div>

                <div class="col-lg-4 col-md-11 border rounded-lg py-2 mx-2 my-2">  <!-- Asks what types of characters need to be generated-->

                    <div class="form-check">  <!--check box 1-->
                            <input class="form-check-input" type="checkbox" id="TypeofChars1" value="option1" checked>
                            <label class="form-check-label" for="TypeofChars1">
                                   Special
                            </label>
                       </div>  <!--check box 1-->
   
                     <div class="form-check">  <!--check box 2-->
                          <input class="form-check-input" type="checkbox" id="TypeofChars2" value="option2" checked>
                          <label class="form-check-label" for="TypeofChars2">
                                 Numeric
                          </label>
                     </div>  <!--check box 2-->
                     
                     <div class="form-check">  <!--check box 3-->
                          <input class="form-check-input" type="checkbox" id="TypeofChars3" value="option3" checked>
                          <label class="form-check-label" for="TypeofChars3">
                                 Lowercase
                          </label>
                     </div>  <!--check box 3-->
                     
                     <div class="form-check">  <!--check box 4-->
                          <input class="form-check-input" type="checkbox" id="TypeofChars4" value="option4" checked>
                          <label class="form-check-label" for="TypeofChars4">
                                 Uppercase
                          </label>
                     </div>  <!--check box 4-->

                </div>   <!-- row:  types of characters need to be generaterd-->
                
                <div class="col-md-0 col-lg"></div>    <!--to manage margins better-->              
          </div>  <!--second row ends here-->

          <!--******************************************************************************-->
          <!--Third row:  heading for results.  Visible only after generating the passwrord -->
          <!--******************************************************************************-->

         <div class="row my-5 text-center">  
              <div class="col-sm-12">
                   <h2 id="MessageToCustomer">This is your custom generated password:</h2>
              </div>
         </div>  <!-- third row ends here-->

          <!--************************************-->
          <!--Forth row:  Random password results -->
          <!--************************************-->

         <div class="row border text-center mx-5 mb-3">  <!--fourth row:  presents the results of the password-->
              <div class="col-sm-12 my-3">
                   <div class="container ">
                         <p class="overflow-auto py-2" id="PasswordResult">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</p>
                    </div>
               </div>
         </div>  <!--fourth row ends here-->

          <!--***********************************************************************************************************-->
          <!--Fifth row:  Buttons that allow user to 1) reset to defaults, 2) generate password, 3) copy it to clipboard -->
          <!--***********************************************************************************************************-->

         <div class="row text-center mx-5 pb-5">   
             <div class="col-sm-0 col-lg"></div>

             <div class="col-sm-12 col-md-4 col-lg-3 py-1">   <!--buttom that clears the screen-->
                <button type="button" id="ResetToDefaults" class="btn btn-info btn-lg rounded-pill btn-block" disabled>Reset to defaults</button>  
             </div>

             <div class="col-sm-12 col-md-4 col-lg-3 py-1">  <!--buttom that generates the password-->
                 <button type="button" id="GeneratePassword" class="btn btn-danger btn-lg rounded-pill btn-block">Generate Password</button>  
             </div>

             <div class="col-sm-12 col-md-4 col-lg-3 text-center py-1">   <!-- buttom that copies to the clipboard-->
                    <button type="button" id="CopyToClippboard" class="btn btn-info btn-lg rounded-pill btn-block" disabled>Copy to clipboard</button>  
             </div>

             <div class="col-sm-0 col-lg"></div>

         </div>  <!-- fifth row ends here-->

    </div>   <!-- main wrapper-->
     
    <!--******************************************************-->
    <!-- Downloading JQuery to enable menu responsive design  -->
    <!--******************************************************-->

     
     <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
     <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

     <!--*************************************************************************************************-->
     <!-- The following section is JQuery and JavaScript code to enable functionality                     -->
     <!-- There are 4 different sets of functionality in this section                                     -->
     <!-- 1) Jquery enables the numeric spinner to select password length.                                -->
     <!-- 2) Main page load:  Sets the environment for the page.                                          -->
     <!-- 3) Event that runs when user selects button to reset to defaults                                -->
     <!-- 4) Event that runs when user clicks on generate password.  It calls CalculateRandompwd function -->
     <!-- 5) Event that runs when user clicks on copy to clipboard                                        -->
     <!-- 6) Function CalculateRandompwd.  Calculates password conforming to user input                   -->
     <!--*************************************************************************************************-->

     <script>

          /***************************************************************************************************/
          // Following section hides the message to the user, and the value of the password generated
          // This hidding is eliminated when the user clicks on button generate random password and it is
          // hidden again if user clicks on button restore defaults
          /***************************************************************************************************/

          document.getElementById("PasswordResult").style.color="white";
          document.getElementById("MessageToCustomer").style.color="white";
          document.getElementById("MessageToCustomer").style.color="white";

          /***************************************************************************************************/
          // Following section reads the value of the numerical range and writes to the html of id # result 
          /***************************************************************************************************/

          $(document).ready(function(){
                // Read value on page load
                $("#result").html($("#UserRequestedPwdLength").val());
        
                // Read value on change
                $("#UserRequestedPwdLength").change(function(){
                    $("#result").html($(this).val());
                });

          });        

          //***************************************************************************************
          // The following code will execute when the user requests to clear the screen
          // from a password originally displayed, and clears the screen, hides password
          // result and customer message.  Also resets the password length to the
          // default of 45 characters, and the type of characters to special
          //***************************************************************************************

          $("#ResetToDefaults").click(function()  //  This code executes when user clicks on Generate password
          {
               document.getElementById("PasswordResult").style.color="white";     // hiding the password result
               document.getElementById("MessageToCustomer").style.color="white";  // hiding the message to user 
               document.getElementById("UserRequestedPwdLength").value=45;        // setting the password length at 45
               document.getElementById("result").innerHTML="45";                  // showing the password length value
               document.getElementById("TypeofChars1").checked=true;  //   all choices checked
               document.getElementById("TypeofChars2").checked=true;  //  all choices checked
               document.getElementById("TypeofChars3").checked=true;  //  all choices checked
               document.getElementById("TypeofChars4").checked=true;  //  all choices checked
               document.getElementById("CopyToClippboard").disabled=true; // all choices checked
          })

          //***************************************************************************************
          // The following code Copies the password to the clipboard.  It is called when the user 
          // clicks on the button copy to clipboard.
          //***************************************************************************************

          $("#CopyToClippboard").click(function() {
               var text = document.getElementById("PasswordResult");
               var selection = window.getSelection();
               var range = document.createRange();
               range.selectNodeContents(text);
               selection.removeAllRanges();
               selection.addRange(range);
               //add to clipboard.
               document.execCommand('copy');
               selection.removeAllRanges();

               alert("Password "+document.getElementById("PasswordResult").innerText+ "has been copied to clipboard.");
          })

          //********************************************************************************************
          //  For the length of the password, it generates a random index.  It accepts two parameters
          //  PwdLength:  Numberic, represents the length of the array
          //  Option1-4 specified the type of characters included in the password generated, as follows
          //        Option1: Special characters
          //        Option2: Numeric
          //        Option3: Alphabetic, lowercase
          //        Option4: Alphanumeric, uppercase
          //  Option1-4 are boolean
          //********************************************************************************************

           function CalculateRandomPwd(PwdLength,Option1,Option2,Option3,Option4) 
           {

               // The following arrays are potential candidates for being included in the password depending on
               // the type of characters the user selected
               var ArrayofCharacters1='\!\"\#\$\%\&\'\(\)\*\+\,\-\.\/\:\;\<\=\>\?\@\[\]\^\_\`\{\|\}\~'.split('');
               var ArrayofCharacters2='0123456789'.split('');
               var ArrayofCharacters3='abcdefghijklmnopqrstuvwxyz'.split('');
               var ArrayofCharacters4='ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

               // Finalized the potential characters to be included in the password
               // Variable ArrayofCharacters to contain all potential candidates

               var ArrayofCharacters=[];
               if(Option1) {ArrayofCharacters=ArrayofCharacters.concat(ArrayofCharacters1)};
               if(Option2) {ArrayofCharacters=ArrayofCharacters.concat(ArrayofCharacters2)};
               if(Option3) {ArrayofCharacters=ArrayofCharacters.concat(ArrayofCharacters3)};
               if(Option4) {ArrayofCharacters=ArrayofCharacters.concat(ArrayofCharacters4)};

               var LengthOfChoices=ArrayofCharacters.length;  // how many character choices we have
               var RandomIndex=0;  //  Random number to access the array
               var RandomPassword="";  // Random password value

               // Calculating the random password
               for (var i=0;i<PwdLength;i++) {
                    RandomIndex=Math.floor(Math.random() * (LengthOfChoices));
                    RandomPassword=RandomPassword+ArrayofCharacters[RandomIndex];
               };

           return (RandomPassword);
           }   // End of function CalculateRandomPwd

           //*********************************************************************************
           // This code is triggered by the user clicking generate password.  It evaluates
           // user input from the html form, and call the random generator function that
           // will ultimately create the random password
           //*********************************************************************************

          $("#GeneratePassword").click(function()  //  This code executes when user clicks on Generate password
          {   
               // initializing which character type user selected
               
               var Option1=false;
               var Option2=false;
               var Option3 =false;
               var Option4 =false;  // Optionx boolean

               if(document.getElementById("TypeofChars1").checked) {Option1 =true};
               if(document.getElementById("TypeofChars2").checked) {Option2 =true};
               if(document.getElementById("TypeofChars3").checked) {Option3 =true};
               if(document.getElementById("TypeofChars4").checked) {Option4 =true};


               // Validates that at least one type of character was selected.  If so, calls the function
               // to generate the password.  Otherwise, provides and alert and does nothing

               if(Option1||Option2||Option3||Option4) {

                    // Updating the value of the password on the clipboard
                    document.getElementById("PasswordResult").innerText=CalculateRandomPwd($("#UserRequestedPwdLength").val(),Option1,Option2,Option3,Option4)
                    document.getElementById("PasswordResult").style.color="black";  // Displays the password
                    document.getElementById("MessageToCustomer").style.color="black";  // Displays the message to user
                    document.getElementById("CopyToClippboard").disabled=false;  // Enables button to copy to clipboard
                    document.getElementById("ResetToDefaults").disabled=false;  // Enables button to reset to defaults
               }
               else {alert("Please select at least one character type to continue")}

          })  //  End of function when user clicks on Generate password
      </script>
</body>
</html>